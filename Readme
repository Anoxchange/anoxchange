
üõ°Ô∏è P2P ZK Mixer ‚Äî –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
üéØ –¶–µ–ª—å —Å–∏—Å—Ç–µ–º—ã
–°–æ–∑–¥–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é, –∞–Ω–æ–Ω–∏–º–Ω—É—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é P2P-—Å–µ—Ç—å –æ–±–º–µ–Ω–∞ —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, USDT) —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è, —Å –ø–æ–º–æ—â—å—é zkSNARK-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –∏ on-chain —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –≤—ã–≤–æ–¥–∞.

üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
P2PManager.sol	–ö–æ–Ω—Ç—Ä–∞–∫—Ç, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –¥–µ–ø–æ–∑–∏—Ç–∞–º–∏, –≤—ã–≤–æ–¥–∞–º–∏ –∏ P2P-–∑–∞—è–≤–∫–∞–º–∏
verifier.sol	zkSNARK-–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
Merkle Tree	–î–µ—Ä–µ–≤–æ commitments (Poseidon), —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ P2PManager
zk-Circuit	Groth16 —Å—Ö–µ–º–∞: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–Ω–∞–Ω–∏–µ nullifier, secret, recipient
CLI	–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ note, –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –≤—ã–∑–æ–≤–∞ withdraw
note.json	–•—Ä–∞–Ω–∏–ª–∏—â–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: nullifier, secret, amount, commitment –∏ root

üîê –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ zkSNARK
zkSNARK-—Å—Ö–µ–º–∞ (Groth16) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç nullifier –∏ secret, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É commitment

Note –µ—â—ë –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ (nullifierHash –Ω–µ –±—ã–ª –ø—Ä–∏–º–µ–Ω—ë–Ω)

Note –≤—Ö–æ–¥–∏—Ç –≤ —Ç–µ–∫—É—â–∏–π Merkle root

–ü–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ –≤—ã–±—Ä–∞–Ω

–í—Å–µ —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è nullifier, secret, amount –∏ sender.

üîÅ –ü–æ—Ç–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
1. Deposit
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç note {nullifier, secret}

–°—Ç—Ä–æ–∏—Ç commitment: Poseidon(nullifier, secret)

–í—ã–∑—ã–≤–∞–µ—Ç P2PManager.deposit(commitment, amount)

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç commitment –≤ Merkle –¥–µ—Ä–µ–≤–æ –∏ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã

üìù –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è note (–≤ JSON), –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥—Ä—É–≥–æ–º—É —á–µ–ª–æ–≤–µ–∫—É

2. P2P –ü–µ—Ä–µ–¥–∞—á–∞ note
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥–∞—ë—Ç note –ø–æ–∫—É–ø–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–Ω–∞–ª (Session, QR, –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä)

–ú–æ–∂–Ω–æ –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ —Ñ–∏–∞—Ç–µ, USDT –∏–ª–∏ –ª—é–±–æ–π —Ñ–æ—Ä–º–µ –æ–ø–ª–∞—Ç—ã

3. Request Withdraw (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ü–æ–∫—É–ø–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ –≤—ã–≤–æ–¥ note:

ts
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
requestWithdraw(commitment, recipientAddress)
–ö–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞—è–≤–∫—É:

recipient: –∫—Ç–æ –º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏

expiresAt: –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 15 –º–∏–Ω—É—Ç)

–ü—Ä–æ–¥–∞–≤–µ—Ü –≤–∏–¥–∏—Ç, —á—Ç–æ note –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∞, –∏ –º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å note

4. Withdraw
–ü–æ–∫—É–ø–∞—Ç–µ–ª—å:

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Merkle proof –∏ zkSNARK-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ

–í—ã–∑—ã–≤–∞–µ—Ç withdraw() –Ω–∞ P2PManager —Å:

proof

root

nullifierHash

recipient

relayer –∏ fee (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ö–æ–Ω—Ç—Ä–∞–∫—Ç:

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç zk-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ —á–µ—Ä–µ–∑ verifier.sol

–£–±–µ–¥–∏—Ç—Å—è, —á—Ç–æ note –µ—â—ë –Ω–µ –ø–æ—Ç—Ä–∞—á–µ–Ω–∞ (nullifierHash)

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞—è–≤–∫—É (–µ—Å–ª–∏ –±—ã–ª–∞) ‚Äî recipient –∏ expiresAt

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ recipient –∏ –ø–æ–º–µ—á–∞–µ—Ç nullifierHash –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π

‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞
–ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ	–ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞—â–∏—Ç—ã
–î–≤–æ–π–Ω–æ–π –≤—ã–≤–æ–¥ –æ–¥–Ω–æ–π note	nullifierHash —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
–°–≤—è–∑—ã–≤–∞–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç–∞ —Å –≤—ã–≤–æ–¥–æ–º	zkSNARK —Å–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—ë
–ü—Ä–æ–¥–∞–≤–µ—Ü –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–≤–µ—Å—Ç–∏ note —Å–∞–º	requestWithdraw() —Å recipient
–ü–æ–∫—É–ø–∞—Ç–µ–ª—å –∑–∞–Ω—è–ª note, –Ω–æ –Ω–µ –ø–ª–∞—Ç–∏—Ç	expiresAt ‚Äî –∑–∞—è–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è

üß™ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ (MVP)
–®–∞–≥ 1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è zk-—Å—Ö–µ–º—ã
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
cd circuits/
snarkjs groth16 setup mixer.r1cs pot12_final.ptau mixer.zkey
snarkjs zkey export verificationkey mixer.zkey verification_key.json
snarkjs zkey export solidityverifier mixer.zkey verifier.sol
–®–∞–≥ 2. –î–µ–ø–ª–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
forge script script/Deploy.s.sol --rpc-url http://localhost:8545 --broadcast
–®–∞–≥ 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è note
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
ts-node cli/deposit.ts
–®–∞–≥ 4. –ó–∞—è–≤–∫–∞ –Ω–∞ –≤—ã–≤–æ–¥ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
ts-node cli/requestWithdraw.ts note.json recipient_address
–®–∞–≥ 5. –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
ts-node cli/withdraw.ts note.json
üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
pgsql
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
p2p-mixer/
‚îú‚îÄ‚îÄ contracts/
‚îÇ   ‚îú‚îÄ‚îÄ P2PManager.sol
‚îÇ   ‚îî‚îÄ‚îÄ verifier.sol
‚îú‚îÄ‚îÄ circuits/
‚îÇ   ‚îî‚îÄ‚îÄ mixer.circom
‚îú‚îÄ‚îÄ cli/
‚îÇ   ‚îú‚îÄ‚îÄ deposit.ts
‚îÇ   ‚îú‚îÄ‚îÄ requestWithdraw.ts
‚îÇ   ‚îî‚îÄ‚îÄ withdraw.ts
‚îú‚îÄ‚îÄ notes/
‚îÇ   ‚îî‚îÄ‚îÄ note_<timestamp>.json
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îî‚îÄ‚îÄ P2P.t.sol
‚îî‚îÄ‚îÄ README.md
üîú –ë—É–¥—É—â–∏–µ —Ñ–∏—á–∏
–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å	–°—Ç–∞—Ç—É—Å
üßæ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ note (PGP/QR)	‚è≥
‚åõ Time-lock (—á–µ–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)	üîú
‚öñÔ∏è –ö–æ–º–∏—Å—Å–∏—è —á–µ—Ä–µ–∑ –Ω–æ–º–∏–Ω–∞–ª	üîú
üì± React GUI + QR	üîú
üîÑ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞	üîú
üß© NFT-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≤–ª–∞–¥–µ–Ω–∏—è	üîú

